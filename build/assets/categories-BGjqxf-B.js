import{b as Se,r as s,j as e,ac as Ae,a4 as P,ad as J,S as Q,s as ke,B as S,A as X,c as Y,T as Z,I as ee,L as Ee,g as Pe,y as A,d as te,ai as Te,f as Be,aj as Me,ak as De}from"./index-amhZd0o_.js";import{u as T,w as Oe,F as Re}from"./FileSaver.min-CcpRWrXT.js";import{C as _e,a as Fe,b as ae,c as h,d as He,e as u}from"./CTable-C6eAHuW8.js";const re=ke(Be)(({theme:f})=>({width:"150px",height:"150px","& .MuiBadge-badge":{backgroundColor:"#44b700",color:"#44b700",boxShadow:`0 0 0 2px ${f.palette.background.paper}`,"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}})),qe=()=>{const f={position:"relative",width:"150px",height:"150px","&:hover .overlay":{opacity:1},boxShadow:"var(--shadow-lg)",border:"1px solid var(--color-gray-100)",borderRadius:"50%",overflow:"hidden",cursor:"pointer"},B={width:"100%",height:"100%"},M={position:"absolute",top:"50%",left:0,width:"100%",height:"50%",bgcolor:"rgba(0,0,0,0.4)",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",opacity:0,transition:"opacity 0.3s"},D={color:"white"},se={borderRadius:"10px",height:"40px","&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgb(210, 134, 26, 0.5) !important",boxShadow:"0 0 0 0.25rem rgb(210, 134, 26, 0.2)"}},oe={PaperProps:{style:{maxHeight:48*4.5+8},sx:{maxWidth:"calc(50% - 32px)","& .MuiMenuItem-root":{whiteSpace:"normal",wordBreak:"wordBreak",minHeight:"30px"},"& .MuiMenuItem-root:hover":{backgroundColor:"rgb(210, 134, 26, 0.1)"}}}},O={width:"100%","& .MuiOutlinedInput-root":{borderRadius:"10px",background:"var(--color-white)",height:"40px",padding:"3px 8px",transition:"all 0.3s",fontSize:"var(--text-xl)",border:"1px solid var(--color-gray-200)"},"& .MuiOutlinedInput-notchedOutline":{border:"none"},"&:hover .MuiOutlinedInput-notchedOutline":{outline:"none",border:"none"},"& .MuiOutlinedInput-input":{padding:0},"& .MuiInputBase-input":{color:"black",fontSize:"var(--text-lg)",border:"none"}},{icons:n,resCategoriesAdmin:i,setResCategoriesAdmin:R,imgs:ne,setSelectPage:le,isMobile:y}=Se(),v=async()=>{try{const t=await Pe();R(t.data)}catch(t){console.error("Lỗi khi gọi API getCategories",t),A.error("Lỗi khi gọi API getCategories"),R([])}},[ie,_]=s.useState([]);s.useEffect(()=>{v(),le("Categories")},[]);const de=t=>{t.currentTarget.onerror=null,t.currentTarget.src=ne.imgDefault},F=t=>new Date(t).toLocaleDateString("en-US"),[ce,H]=s.useState(null),L=!1,[l,xe]=s.useState(10),[o,k]=s.useState(1),[E,pe]=s.useState(1),[d,U]=s.useState(0),ge=t=>{xe(t.target.value),k(1)},he=()=>{o<E&&k(t=>t+1)},ue=()=>{o>1&&k(t=>t-1)},me=async t=>{try{(await De(t)).data===!0&&(A.success("Delete success"),v())}catch(a){console.error("Lỗi khi gọi API deleteCategoriesById",a),A.error("Lỗi khi gọi API deleteCategoriesById")}},be=t=>{me(t)},fe=()=>{if(!i||i.length===0){A.error("There is no data to export to Excel!");return}const t=T.json_to_sheet(i),a=T.book_new();T.book_append_sheet(a,t,"Categories");const r=Oe(a,{bookType:"xlsx",type:"array"}),g=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});Re.saveAs(g,`resCategory_${new Date().toISOString().slice(0,10)}.xlsx`)};s.useEffect(()=>{if(i&&i.length>0){const t=i.length;U(t);const a=Math.ceil(t/l);pe(a);const r=(o-1)*l,g=Math.min(r+l,t),Ie=i.slice(r,g);_(Ie)}else _([]),U(0)},[i,l,o]);const[ye,z]=s.useState(!1),ve=()=>{z(!0),b(""),p("")},G=()=>z(!1),[m,p]=s.useState(""),[j,c]=s.useState(""),[w,b]=s.useState(""),x=s.useRef(null),[C,N]=s.useState(""),I=t=>{const a=t.target.files?.[0];if(!a)c("Please choose a representative photo");else{const r=new FileReader;r.onload=g=>{g.target?.result&&b(g.target.result)},r.readAsDataURL(a)}},$=()=>x.current?.click(),je=async t=>{if(t.preventDefault(),c(""),N(""),!x.current?.files?.length){N("Please choose a representative photo");return}const a=await te(w);try{(await Te({name:m,image:a})).data.name===m?(G(),v(),b(""),p("")):c("Add false")}catch(r){console.error("Error:",r),c("Add false")}},[we,q]=s.useState(!1),[K,V]=s.useState(void 0),Ce=t=>{const a=i.find(r=>r.id===t);b(a?.image),p(a?.name),V(t),q(!0)},W=()=>{q(!1),V(void 0)},Ne=async t=>{if(t.preventDefault(),c(""),N(""),!x.current?.files?.length){N("Please choose a representative photo");return}const a=await te(w);try{(await Me(K,{name:m,image:a})).data.id===K?(W(),v(),b(""),p("")):c("Edit false")}catch(r){console.error("Error:",r),c("Edit false")}};return e.jsxs(e.Fragment,{children:[e.jsxs("main",{className:"min-h-[77.5vh] p-5 flex flex-col gap-5",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:["Show",e.jsxs(Ae,{value:l,onChange:ge,className:" w-full",sx:se,MenuProps:oe,children:[e.jsx(P,{value:10,children:"10"}),e.jsx(P,{value:15,children:"15"}),e.jsx(P,{value:20,children:"20"})]}),"categories"]}),e.jsxs("div",{className:"ml-auto flex gap-2",children:[e.jsx("button",{className:"h-[40px] px-4 bg-orange-700 text-white shadow-lg rounded-[10px]",onClick:ve,children:y?n.iconAdd:"Add Category"}),e.jsx(J,{open:ye,onClose:G,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs("div",{className:"absolute top-1/2 left-1/2 flex flex-col gap-4 -translate-x-1/2 -translate-y-1/2 sm:w-[400px] w-[320px] bg-white shadow-lg rounded-[10px] p-5 ",children:[e.jsx("h3",{className:"text-orange-700 text-3xl text-center",children:"Add Category"}),e.jsx("div",{className:"w-full h-[2px] bg-gray-300"}),j&&e.jsx("div",{className:"bg-orange-700/20 border-[1px] border-orange-700/50 shadow-lg items-center mb-3 text-orange-700 text-lg py-1 rounded-[5px]",children:e.jsxs("p",{className:"text-center ",children:[j," !"]})}),e.jsxs("form",{className:"space-y-4",onSubmit:je,children:[e.jsxs("div",{className:"justify-self-center mx-auto flex flex-col gap-3",children:[e.jsx(Q,{direction:"row",spacing:2,children:e.jsx(re,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:e.jsxs(S,{sx:f,onClick:$,children:[e.jsx(X,{src:w,alt:"avatar",sx:B}),e.jsx(S,{className:"overlay",sx:M,children:e.jsx(Y,{sx:D,children:n.iconCamera})}),e.jsx("input",{alt:"avata",type:"file",accept:"image/*",ref:x,name:"avatar",className:"hidden",onChange:I})]})})}),e.jsxs("div",{className:"w-full pt-[10px]",children:[e.jsx("label",{htmlFor:"avataInput",className:" transition-all duration-300 ease cursor-pointer border-[1px] border-orange-700 text-orange-700 px-7 py-2 rounded-full hover:text-orange-600 hover:border-orange-600 hover:shadow-lg",children:"Upload avatar"}),e.jsx("input",{id:"avataInput",alt:"avata",type:"file",name:"avatar",accept:"image/*",ref:x,className:"hidden",onChange:I})]})]}),C&&e.jsxs("p",{className:"text-sm text-orange-700",children:[C," !"]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{htmlFor:"name",className:"block text-xl font-medium text-gray-700",children:"Full Name"}),e.jsx(Z,{type:"text",required:!0,autoComplete:"name",placeholder:"Category name",name:"name",slotProps:{input:{startAdornment:e.jsx(ee,{position:"start",children:n.iconUser})}},value:m,variant:"outlined",sx:O,onChange:t=>p(t.target.value)})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-[10px] shadow-sm text-lg font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition duration-200",children:"add"})})]})]})}),e.jsx("button",{onClick:fe,className:"h-[40px] px-4 text-orange-700 border-[1px] shadow-lg border-orange-700 rounded-[10px]",children:y?n.iconExcel:"Export"})]})]}),e.jsx("div",{className:"grid",children:e.jsx("div",{className:"w-full overflow-x-auto scroll-x",children:e.jsxs(_e,{bordered:!0,hover:!0,align:"middle",responsive:!0,className:"w-full border border-gray-300 ",style:{tableLayout:"fixed"},children:[e.jsx(Fe,{color:"light",children:e.jsxs(ae,{children:[e.jsx(h,{className:"w-[50px] text-center bg-orange-200 p-3 text-orange-700 border-[1px] border-gray-200",children:"ID"}),e.jsx(h,{className:"text-center bg-orange-200 p-3 text-orange-700 border-[1px] border-gray-200 max-md:w-[130px]",children:"Name"}),e.jsx(h,{className:"text-center bg-orange-200 p-3 text-orange-700 border-[1px] border-gray-200 w-[70px]",children:"Image"}),e.jsx(h,{className:"text-center bg-orange-200 p-3 text-orange-700 border-[1px] border-gray-200 w-[110px]",children:"Creation At"}),e.jsx(h,{className:"text-center bg-orange-200 p-3 text-orange-700 border-[1px] border-gray-200 w-[110px]",children:"Update At"}),e.jsx(h,{className:"w-[100px] text-center bg-orange-200 p-3 text-orange-700 border-[1px] border-gray-200",children:"Action"})]})}),e.jsx(He,{children:ie.map((t,a)=>e.jsxs(ae,{className:"table-body-row-mucluc",onClick:()=>{H(a)},onKeyDown:r=>{r.key==="Enter"&&(r.preventDefault(),H(null))},style:{border:a===ce?"2px dashed rgb(92, 0, 0)":"",cursor:"pointer"},children:[e.jsx(u,{className:"text-center p-3 border-[1px] border-gray-200",children:t.id}),e.jsx(u,{className:"text-center p-3 border-[1px] border-gray-200 break-all",children:t.name}),e.jsx(u,{className:"p-3 border-[1px] border-gray-200",children:e.jsx("img",{src:t.image,onError:de,className:"w-12 h-12 object-cover rounded mx-auto",alt:`category ${t.id}`})}),e.jsx(u,{className:"text-center p-3 border-[1px] border-gray-200",children:F(t.creationAt)}),e.jsxs(u,{className:"text-center p-3 border-[1px] border-gray-200",children:[" ",F(t.updatedAt)]}),e.jsx(u,{className:"text-center p-3 border-[1px] border-gray-200",children:e.jsxs("div",{className:" flex justify-center gap-2 p-2",children:[e.jsx("button",{onClick:()=>{Ce(t.id)},className:"px-2 py-2 bg-blue-500 text-white shadow-lg transition-all duration-300 ease rounded-[5px] hover:bg-blue-600 hover:shadow-xl",children:n.iconEdit}),e.jsx("button",{onClick:()=>{be(t.id)},className:"px-2 py-2 bg-red-500 text-white shadow-lg transition-all duration-300 ease rounded-[5px] hover:bg-red-600 hover:shadow-xl",children:n.iconDelete})]})})]},t.id||a))})]})})}),e.jsx(J,{open:we,onClose:W,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs("div",{className:"absolute top-1/2 left-1/2 flex flex-col gap-4 -translate-x-1/2 -translate-y-1/2 sm:w-[400px] w-[320px] bg-white shadow-lg rounded-[10px] p-5 ",children:[e.jsx("h3",{className:"text-orange-700 text-3xl text-center",children:"Edit Category"}),e.jsx("div",{className:"w-full h-[2px] bg-gray-300"}),j&&e.jsx("div",{className:"bg-orange-700/20 border-[1px] border-orange-700/50 shadow-lg items-center mb-3 text-orange-700 text-lg py-1 rounded-[5px]",children:e.jsxs("p",{className:"text-center ",children:[j," !"]})}),e.jsxs("form",{className:"space-y-4",onSubmit:Ne,children:[e.jsxs("div",{className:"justify-self-center mx-auto flex flex-col gap-3",children:[e.jsx(Q,{direction:"row",spacing:2,children:e.jsx(re,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:e.jsxs(S,{sx:f,onClick:$,children:[e.jsx(X,{src:w,alt:"avatar",sx:B}),e.jsx(S,{className:"overlay",sx:M,children:e.jsx(Y,{sx:D,children:n.iconCamera})}),e.jsx("input",{alt:"avata",type:"file",accept:"image/*",ref:x,name:"avatar",className:"hidden",onChange:I})]})})}),e.jsxs("div",{className:"w-full pt-[10px]",children:[e.jsx("label",{htmlFor:"avataInput",className:" transition-all duration-300 ease cursor-pointer border-[1px] border-orange-700 text-orange-700 px-7 py-2 rounded-full hover:text-orange-600 hover:border-orange-600 hover:shadow-lg",children:"Upload avatar"}),e.jsx("input",{id:"avataInput",alt:"avata",type:"file",name:"avatar",accept:"image/*",ref:x,className:"hidden",onChange:I})]})]}),C&&e.jsxs("p",{className:"text-sm text-orange-700",children:[C," !"]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{htmlFor:"name",className:"block text-xl font-medium text-gray-700",children:"Name Category"}),e.jsx(Z,{type:"text",required:!0,autoComplete:"name",placeholder:"Name Category",name:"name",slotProps:{input:{startAdornment:e.jsx(ee,{position:"start",children:n.iconUser})}},value:m,variant:"outlined",sx:O,onChange:t=>p(t.target.value)})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-[10px] shadow-sm text-lg font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition duration-200",children:"Edit"})})]})]})}),e.jsxs("div",{className:"flex justify-between items-center max-sm:grid gap-2 max-sm:justify-center",children:[e.jsxs("div",{className:"items-center",children:[d===0&&e.jsx("p",{children:"No items displayed"}),d>l*o&&e.jsxs("p",{children:["Showing ",(o-1)*l+1," to ",o*l," of ",d," categories"]}),d<=l*o&&d>0&&e.jsxs("p",{children:["Showing ",(o-1)*l+1," to ",d," of ",d," categories"]})]}),e.jsxs("div",{className:"flex items-center gap-2 max-sm:justify-center",children:[e.jsx("button",{onClick:ue,className:"h-[40px] p-2 md:px-4 bg-orange-700 text-white rounded-[10px] shadow-lg disabled:opacity-50",disabled:o===1||L,children:y?n.iconPrev:"Previous"}),e.jsxs("span",{className:"text-page font-medium",children:[o,"/",E]}),e.jsx("button",{onClick:he,className:"h-[40px] p-2 md:px-4 bg-orange-700 text-white rounded-[10px] shadow-lg disabled:opacity-50",disabled:o===E||L,children:y?n.iconNext:"Next"})]})]})]}),e.jsx(Ee,{position:"top-right",autoClose:3e3})]})};export{qe as default};
