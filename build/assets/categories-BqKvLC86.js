import{b as Ie,r as s,j as e,ac as Se,a4 as E,ad as W,S as J,s as Ae,B as I,A as Q,c as X,T as Y,I as Z,L as ke,g as Ee,y as S,d as ee,ai as Pe,f as Te,aj as Be,ak as De}from"./index-DXJ3-PDI.js";import{C as Me,a as Oe,b as te,c as h,d as Re,e as u,u as P,w as _e,F as Fe}from"./CTable-De58TUfM.js";const ae=Ae(Te)(({theme:f})=>({width:"150px",height:"150px","& .MuiBadge-badge":{backgroundColor:"#44b700",color:"#44b700",boxShadow:`0 0 0 2px ${f.palette.background.paper}`,"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}})),Ge=()=>{const f={position:"relative",width:"150px",height:"150px","&:hover .overlay":{opacity:1},boxShadow:"var(--shadow-lg)",border:"1px solid var(--color-gray-100)",borderRadius:"50%",overflow:"hidden",cursor:"pointer"},T={width:"100%",height:"100%"},B={position:"absolute",top:"50%",left:0,width:"100%",height:"50%",bgcolor:"rgba(0,0,0,0.4)",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center",opacity:0,transition:"opacity 0.3s"},D={color:"white"},re={borderRadius:"10px",height:"40px","&:hover .MuiOutlinedInput-notchedOutline":{borderColor:"rgb(210, 134, 26, 0.5) !important",boxShadow:"0 0 0 0.25rem rgb(210, 134, 26, 0.2)"}},se={PaperProps:{style:{maxHeight:48*4.5+8},sx:{maxWidth:"calc(50% - 32px)","& .MuiMenuItem-root":{whiteSpace:"normal",wordBreak:"wordBreak",minHeight:"30px"},"& .MuiMenuItem-root:hover":{backgroundColor:"rgb(210, 134, 26, 0.1)"}}}},M={width:"100%","& .MuiOutlinedInput-root":{borderRadius:"10px",background:"var(--color-white)",height:"40px",padding:"3px 8px",transition:"all 0.3s",fontSize:"var(--text-xl)",border:"1px solid var(--color-gray-200)"},"& .MuiOutlinedInput-notchedOutline":{border:"none"},"&:hover .MuiOutlinedInput-notchedOutline":{outline:"none",border:"none"},"& .MuiOutlinedInput-input":{padding:0},"& .MuiInputBase-input":{color:"black",fontSize:"var(--text-lg)",border:"none"}},{icons:x,resCategoriesAdmin:l,setResCategoriesAdmin:O,imgs:oe,setSelectPage:ne}=Ie(),y=async()=>{try{const t=await Ee();O(t.data)}catch(t){console.error("Lỗi khi gọi API getCategories",t),S.error("Lỗi khi gọi API getCategories"),O([])}},[le,R]=s.useState([]);s.useEffect(()=>{y(),ne("Categories")},[]);const ie=t=>{t.currentTarget.onerror=null,t.currentTarget.src=oe.imgDefault},_=t=>new Date(t).toLocaleDateString("en-US"),[de,F]=s.useState(null),H=!1,[n,ce]=s.useState(10),[o,A]=s.useState(1),[k,xe]=s.useState(1),[i,L]=s.useState(0),ge=t=>{ce(t.target.value),A(1)},pe=()=>{o<k&&A(t=>t+1)},he=()=>{o>1&&A(t=>t-1)},ue=async t=>{try{(await De(t)).data===!0&&(S.success("Delete success"),y())}catch(a){console.error("Lỗi khi gọi API deleteCategoriesById",a),S.error("Lỗi khi gọi API deleteCategoriesById")}},me=t=>{ue(t)},be=()=>{if(!l||l.length===0){S.error("There is no data to export to Excel!");return}const t=P.json_to_sheet(l),a=P.book_new();P.book_append_sheet(a,t,"Categories");const r=_e(a,{bookType:"xlsx",type:"array"}),p=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});Fe.saveAs(p,`resCategory_${new Date().toISOString().slice(0,10)}.xlsx`)};s.useEffect(()=>{if(l&&l.length>0){const t=l.length;L(t);const a=Math.ceil(t/n);xe(a);const r=(o-1)*n,p=Math.min(r+n,t),Ne=l.slice(r,p);R(Ne)}else R([]),L(0)},[l,n,o]);const[fe,U]=s.useState(!1),ye=()=>{U(!0),b(""),g("")},z=()=>U(!1),[m,g]=s.useState(""),[v,d]=s.useState(""),[j,b]=s.useState(""),c=s.useRef(null),[C,w]=s.useState(""),N=t=>{const a=t.target.files?.[0];if(!a)d("Please choose a representative photo");else{const r=new FileReader;r.onload=p=>{p.target?.result&&b(p.target.result)},r.readAsDataURL(a)}},G=()=>c.current?.click(),ve=async t=>{if(t.preventDefault(),d(""),w(""),!c.current?.files?.length){w("Please choose a representative photo");return}const a=await ee(j);try{(await Pe({name:m,image:a})).data.name===m?(z(),y(),b(""),g("")):d("Add false")}catch(r){console.error("Error:",r),d("Add false")}},[je,$]=s.useState(!1),[q,K]=s.useState(void 0),Ce=t=>{const a=l.find(r=>r.id===t);b(a?.image),g(a?.name),K(t),$(!0)},V=()=>{$(!1),K(void 0)},we=async t=>{if(t.preventDefault(),d(""),w(""),!c.current?.files?.length){w("Please choose a representative photo");return}const a=await ee(j);try{(await Be(q,{name:m,image:a})).data.id===q?(V(),y(),b(""),g("")):d("Edit false")}catch(r){console.error("Error:",r),d("Edit false")}};return e.jsxs(e.Fragment,{children:[e.jsxs("main",{className:"min-h-[77.5vh] p-5 flex flex-col gap-5",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex gap-2 items-center",children:["Show",e.jsxs(Se,{value:n,onChange:ge,className:" w-full",sx:re,MenuProps:se,children:[e.jsx(E,{value:10,children:"10"}),e.jsx(E,{value:15,children:"15"}),e.jsx(E,{value:20,children:"20"})]}),"categories"]}),e.jsxs("div",{className:"ml-auto flex gap-2",children:[e.jsx("button",{className:"h-[40px] px-4 bg-orange-700 text-white shadow-lg rounded-[10px]",onClick:ye,children:"Add Category"}),e.jsx(W,{open:fe,onClose:z,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs("div",{className:"absolute top-1/2 left-1/2 flex flex-col gap-4 -translate-x-1/2 -translate-y-1/2 w-1/3 bg-white shadow-lg rounded-[10px] p-5 ",children:[e.jsx("h3",{className:"text-orange-700 text-3xl text-center",children:"Add Category"}),e.jsx("div",{className:"w-full h-[2px] bg-gray-300"}),v&&e.jsx("div",{className:"bg-orange-700/20 border-[1px] border-orange-700/50 shadow-lg items-center mb-3 text-orange-700 text-lg py-1 rounded-[5px]",children:e.jsxs("p",{className:"text-center ",children:[v," !"]})}),e.jsxs("form",{className:"space-y-4",onSubmit:ve,children:[e.jsxs("div",{className:"justify-self-center mx-auto flex flex-col gap-3",children:[e.jsx(J,{direction:"row",spacing:2,children:e.jsx(ae,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:e.jsxs(I,{sx:f,onClick:G,children:[e.jsx(Q,{src:j,alt:"avatar",sx:T}),e.jsx(I,{className:"overlay",sx:B,children:e.jsx(X,{sx:D,children:x.iconCamera})}),e.jsx("input",{alt:"avata",type:"file",accept:"image/*",ref:c,name:"avatar",className:"hidden",onChange:N})]})})}),e.jsxs("div",{className:"w-full pt-[10px]",children:[e.jsx("label",{htmlFor:"avataInput",className:" transition-all duration-300 ease cursor-pointer border-[1px] border-orange-700 text-orange-700 px-7 py-2 rounded-full hover:text-orange-600 hover:border-orange-600 hover:shadow-lg",children:"Upload avatar"}),e.jsx("input",{id:"avataInput",alt:"avata",type:"file",name:"avatar",accept:"image/*",ref:c,className:"hidden",onChange:N})]})]}),C&&e.jsxs("p",{className:"text-sm text-orange-700",children:[C," !"]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{htmlFor:"name",className:"block text-xl font-medium text-gray-700",children:"Full Name"}),e.jsx(Y,{type:"text",required:!0,autoComplete:"name",placeholder:"Category name",name:"name",slotProps:{input:{startAdornment:e.jsx(Z,{position:"start",children:x.iconUser})}},value:m,variant:"outlined",sx:M,onChange:t=>g(t.target.value)})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-[10px] shadow-sm text-lg font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition duration-200",children:"add"})})]})]})}),e.jsx("button",{onClick:be,className:"h-[40px] px-4 text-orange-700 border-[1px] shadow-lg border-orange-700 rounded-[10px]",children:"Export"})]})]}),e.jsxs(Me,{bordered:!0,hover:!0,align:"middle",responsive:!0,className:"w-full border border-gray-300 ",style:{tableLayout:"fixed"},children:[e.jsx(Oe,{color:"light",children:e.jsxs(te,{children:[e.jsx(h,{className:"w-[50px] text-center bg-orange-200 p-3 text-orange-700 border-[1px] border-gray-200",children:"ID"}),e.jsx(h,{className:"text-center bg-orange-200 p-3 text-orange-700 border-[1px] border-gray-200",children:"Name"}),e.jsx(h,{className:"text-center bg-orange-200 p-3 text-orange-700 border-[1px] border-gray-200",children:"Image"}),e.jsx(h,{className:"text-center bg-orange-200 p-3 text-orange-700 border-[1px] border-gray-200",children:"Creation At"}),e.jsx(h,{className:"text-center bg-orange-200 p-3 text-orange-700 border-[1px] border-gray-200",children:"Update At"}),e.jsx(h,{className:"w-[100px] text-center bg-orange-200 p-3 text-orange-700 border-[1px] border-gray-200",children:"Action"})]})}),e.jsx(Re,{children:le.map((t,a)=>e.jsxs(te,{className:"table-body-row-mucluc",onClick:()=>{F(a)},onKeyDown:r=>{r.key==="Enter"&&(r.preventDefault(),F(null))},style:{border:a===de?"2px dashed rgb(92, 0, 0)":"",cursor:"pointer"},children:[e.jsx(u,{className:"text-center p-3 border-[1px] border-gray-200",children:t.id}),e.jsx(u,{className:"text-center p-3 border-[1px] border-gray-200",children:t.name}),e.jsx(u,{className:"p-3 border-[1px] border-gray-200",children:e.jsx("img",{src:t.image,onError:ie,className:"w-12 h-12 object-cover rounded mx-auto",alt:`category ${t.id}`})}),e.jsx(u,{className:"text-center p-3 border-[1px] border-gray-200",children:_(t.creationAt)}),e.jsxs(u,{className:"text-center p-3 border-[1px] border-gray-200",children:[" ",_(t.updatedAt)]}),e.jsx(u,{className:"text-center p-3 border-[1px] border-gray-200",children:e.jsxs("div",{className:" flex justify-center gap-2 p-2",children:[e.jsx("button",{onClick:()=>{Ce(t.id)},className:"px-2 py-2 bg-blue-500 text-white shadow-lg transition-all duration-300 ease rounded-[5px] hover:bg-blue-600 hover:shadow-xl",children:x.iconEdit}),e.jsx("button",{onClick:()=>{me(t.id)},className:"px-2 py-2 bg-red-500 text-white shadow-lg transition-all duration-300 ease rounded-[5px] hover:bg-red-600 hover:shadow-xl",children:x.iconDelete})]})})]},t.id||a))})]}),e.jsx(W,{open:je,onClose:V,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs("div",{className:"absolute top-1/2 left-1/2 flex flex-col gap-4 -translate-x-1/2 -translate-y-1/2 w-1/3 bg-white shadow-lg rounded-[10px] p-5 ",children:[e.jsx("h3",{className:"text-orange-700 text-3xl text-center",children:"Edit Category"}),e.jsx("div",{className:"w-full h-[2px] bg-gray-300"}),v&&e.jsx("div",{className:"bg-orange-700/20 border-[1px] border-orange-700/50 shadow-lg items-center mb-3 text-orange-700 text-lg py-1 rounded-[5px]",children:e.jsxs("p",{className:"text-center ",children:[v," !"]})}),e.jsxs("form",{className:"space-y-4",onSubmit:we,children:[e.jsxs("div",{className:"justify-self-center mx-auto flex flex-col gap-3",children:[e.jsx(J,{direction:"row",spacing:2,children:e.jsx(ae,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot",children:e.jsxs(I,{sx:f,onClick:G,children:[e.jsx(Q,{src:j,alt:"avatar",sx:T}),e.jsx(I,{className:"overlay",sx:B,children:e.jsx(X,{sx:D,children:x.iconCamera})}),e.jsx("input",{alt:"avata",type:"file",accept:"image/*",ref:c,name:"avatar",className:"hidden",onChange:N})]})})}),e.jsxs("div",{className:"w-full pt-[10px]",children:[e.jsx("label",{htmlFor:"avataInput",className:" transition-all duration-300 ease cursor-pointer border-[1px] border-orange-700 text-orange-700 px-7 py-2 rounded-full hover:text-orange-600 hover:border-orange-600 hover:shadow-lg",children:"Upload avatar"}),e.jsx("input",{id:"avataInput",alt:"avata",type:"file",name:"avatar",accept:"image/*",ref:c,className:"hidden",onChange:N})]})]}),C&&e.jsxs("p",{className:"text-sm text-orange-700",children:[C," !"]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{htmlFor:"name",className:"block text-xl font-medium text-gray-700",children:"Name Category"}),e.jsx(Y,{type:"text",required:!0,autoComplete:"name",placeholder:"Name Category",name:"name",slotProps:{input:{startAdornment:e.jsx(Z,{position:"start",children:x.iconUser})}},value:m,variant:"outlined",sx:M,onChange:t=>g(t.target.value)})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-[10px] shadow-sm text-lg font-medium text-white bg-orange-600 hover:bg-orange-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition duration-200",children:"Edit"})})]})]})}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"items-center",children:[i===0&&e.jsx("p",{children:"No items displayed"}),i>n*o&&e.jsxs("p",{children:["Showing ",(o-1)*n+1," to ",o*n," of ",i," categories"]}),i<=n*o&&i>0&&e.jsxs("p",{children:["Showing ",(o-1)*n+1," to ",i," of ",i," categories"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:he,className:"h-[40px] px-4 bg-orange-700 text-white rounded-[10px] shadow-lg disabled:opacity-50",disabled:o===1||H,children:"Previous"}),e.jsxs("span",{className:"text-page font-medium",children:[o,"/",k]}),e.jsx("button",{onClick:pe,className:"h-[40px] px-4 bg-orange-700 text-white rounded-[10px] shadow-lg disabled:opacity-50",disabled:o===k||H,children:"Next"})]})]})]}),e.jsx(ke,{position:"top-right",autoClose:3e3})]})};export{Ge as default};
