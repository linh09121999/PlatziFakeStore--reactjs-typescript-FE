import{u as F,b as P,r as n,j as e,T as R,L as q,y}from"./index-amhZd0o_.js";const z=()=>{const g=F(),{icons:o,imgs:h,ordersList:r,setOrdersList:b,ordersNumber:j,setOrdersNumber:f}=P(),S={minWidth:"30px",maxWidth:"60px","& .MuiOutlinedInput-root":{borderRadius:0,height:"30px",padding:"3px 8px",transition:"all 0.3s",fontSize:"var(--text-xl)",borderTop:"1px solid var(--color-orange-700)",borderBottom:"1px solid var(--color-orange-700)"},"& .MuiOutlinedInput-notchedOutline":{border:"none"},"&:hover .MuiOutlinedInput-notchedOutline":{outline:"none",border:"none"},"& .MuiOutlinedInput-input":{padding:0},"& .MuiInputBase-input":{color:"black",fontSize:"var(--text-lg)",border:"none",textAlign:"center"}},[l,N]=n.useState({});n.useEffect(()=>{const t={};r.forEach(s=>{const a=localStorage.getItem(`quantity_${s.id}`);t[s.id]=a?Number(a):1}),N(t)},[r]);const i=(t,s)=>{N(a=>{const m={...a,[t]:s};return localStorage.setItem(`quantity_${t}`,String(s)),m})},w=t=>{i(t,Math.max(1,(l[t]||1)-1))},C=t=>{i(t,(l[t]||1)+1)},I=(t,s)=>{const a=Math.max(1,Number(s.target.value)||1);i(t,a)},T=t=>{t.currentTarget.onerror=null,t.currentTarget.src=h.imgDefault},O=t=>{const s=r.filter(a=>a.id!==t);b(s),f(j-1),localStorage.removeItem(`quantity_${t}`)},d=r.reduce((t,s)=>t+s.price*(l[s.id]||1),0),[x,$]=n.useState(0),[c,k]=n.useState(0),[p,D]=n.useState(0),[_,M]=n.useState([]),u=new Date,v=`${(u.getMonth()+1).toString().padStart(2,"0")}/${u.getDate().toString().padStart(2,"0")}/${u.getFullYear()}`,E=()=>{r.length===0?y.error("There is no product in the cart"):(y.success("Successful order!"),D(p+1),$(x+d),k(c+j),M(t=>{const s=r.filter(a=>!t.some(m=>m.id===a.id));return[...t,...s]}),b([]),f(0))};return n.useEffect(()=>{const t=localStorage.getItem("dailyStats"),s=t?JSON.parse(t):{};s[v]={totalPurchases:p,totalRevenues:x,totalOrder:c,totalProducts:_},localStorage.setItem("dailyStats",JSON.stringify(s))},[v,p,x,c]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full px-5 bg-gray-100 sticky z-[999] md:top-[120px] max-md:top-[142px]",children:e.jsxs("div",{className:"flex gap-2 max-w-[1500px] mx-auto items-center text-orange-700 py-[10px] text-xl max-md:text-lg",children:[e.jsx("div",{onClick:()=>g("/"),className:"transition duration-300 ease css-icon",children:o.iconHome}),e.jsx("span",{children:o.iconNext}),e.jsx("div",{className:"transition duration-300 ease css-icon",children:"Cart"})]})}),e.jsx("main",{className:"bg-gray-100 min-h-[70vh] p-5",children:e.jsxs("div",{className:"max-w-[1500px] mx-auto items-center grid lg:grid-cols-[3fr_350px] gap-5",children:[e.jsxs("div",{className:"flex flex-col gap-6 self-start rounded-[10px] bg-white p-5 flex-1 shadow-lg",children:[e.jsx("h3",{className:"text-xl pb-2 border-b-[1px] border-b-gray-300",children:"PRODUCTS"}),r.length===0?e.jsx("img",{src:h.imgNoItem,alt:"no items"}):e.jsx(e.Fragment,{children:r.map(t=>e.jsxs("div",{className:"  transition-all duration-300 ease group pointer pb-[10px] border-b-[1px] border-b-gray-200",children:[e.jsx("p",{className:"text-xl max-md:text-lg text-start sm:hidden",children:t.title}),e.jsxs("div",{className:"relative items-center flex gap-4 max-md:gap-2 max-sm:gap-1 overflow-hidden text-center",children:[e.jsx("img",{src:t.images[0],alt:t.title,onError:T,className:"relative w-[140px] max-sm:w-[100px] transition-all duration-300 ease group-hover:scale-105 group-hover:opacity-70"}),e.jsxs("div",{className:"xl:flex gap-4 p-5 xl:justify-between max-xl:grid items-center w-full",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("p",{className:"text-xl max-md:text-lg text-start max-sm:hidden",children:t.title}),e.jsxs("p",{className:"text-2xl max-md:text-xl max-sm:text-lg text-start text-orange-700 bg-orange-700/20 w-fit px-4  rounded-full font-bold border-[1px] border-orange-700/20 shadow-lg",children:["$ ",t.price]})]}),e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsxs("div",{className:"flex",children:[e.jsx("button",{onClick:()=>w(t.id),className:" rounded-[10px_0_0_10px] border-[1px] border-orange-700 px-2 max-md:px-2 max-md:py-1",children:o.iconDecrease}),e.jsx(R,{value:l[t.id]||1,variant:"outlined",sx:S,onChange:s=>I(t.id,s)}),e.jsx("button",{onClick:()=>C(t.id),className:" rounded-[0_10px_10px_0] border-[1px] border-orange-700 px-2 max-md:px-2 max-md:py-1",children:o.iconIncrease})]}),e.jsx("button",{onClick:()=>O(t.id),className:"text-orange-700 text-xl max-md:text-lg",children:o.iconDelete})]})]})]})]},t.id))}),e.jsx("div",{children:e.jsxs("button",{onClick:()=>g("/products"),className:"css-next mx-auto shadow-lg flex gap-2 border-[1px] border-orange-700 text-orange-700 rounded-[10px] px-4 py-2 w-fit justify-self-center",children:[e.jsx("span",{className:"rotate-[180deg]",children:o.iconNext}),"Continue to buy products"]})})]}),e.jsxs("div",{className:"bg-white p-5 rounded-[10px] shadow-lg flex flex-col gap-5 self-start ",children:[e.jsx("h3",{className:"text-xl pb-2 border-b-[1px] border-b-gray-300",children:"PAYMENT"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex justify-between text-lg",children:[e.jsx("p",{children:"Subtotal"}),e.jsxs("p",{children:["$ ",d.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between text-lg",children:[e.jsx("p",{children:"Shipping fee"}),e.jsx("p",{children:"$ 0"})]}),e.jsxs("div",{className:"flex justify-between text-lg",children:[e.jsx("p",{children:"Discount"}),e.jsx("p",{children:"$ 0"})]})]}),e.jsxs("div",{className:"pt-2 border-t-[1px] border-t-gray-300 flex justify-between text-xl",children:[e.jsx("p",{children:"Total"}),e.jsxs("p",{children:["$ ",d.toFixed(2)]})]}),e.jsx("button",{onClick:E,className:"py-2 text-white font-bold rounded-[10px] bg-orange-700",children:"Checkout"})]})]})}),e.jsx(q,{position:"top-right",autoClose:3e3})]})};export{z as default};
